<%- include('partials/header', { title: 'Reservas - Zap', activePage: 'reservas' }) %>

<section id="reservations" class="m-4">
    <div class="row justify-content-center">
        <div class="col-6 col-lg-6 bg-zapgrey p-4 border border-dark">
            <h2>Reservas</h2>
            <fieldset class="mx-auto">
                <legend>Formulario de las reservas</legend>
                <div class="progress rounded-0 mb-2 bg-zapgrey">
                    <div id="progressBar" class="progress-bar progress-bar-striped bg-dark rounded-0" role="progressbar"
                        style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    </div>
                </div>
                <form id="reservationForm" method="POST" action="/reservas" aria-label="Formulario de la reserva" class="d-flex flex-column gap-3">
                    <div class="d-flex gap-2">
                        <div class="d-flex flex-column w-50">
                            <label for="fullName">Nombre y Apellidos: </label>
                            <input type="text" id="fullName" name="fullName" required class="form-text text-dark border-1 border-dark rounded-0 p-2">
                            <span id="fullNameError" class="error text-danger" aria-live="polite"></span>
                        </div>
                        <div class="d-flex flex-column w-50">
                            <label for="email">Correo electrónico: </label>
                            <input type="email" id="email" name="email" required class="form-text text-dark border-1 border-dark rounded-0 p-2">
                            <span id="emailError" class="error text-danger" aria-live="polite"></span>
                        </div>
                    </div>
                    <div>
                        <label for="selectedVehicle">Vehículo: </label>
                        <select id="selectedVehicle" name="vehicles" required
                            class="form-select border-dark border-1 rounded-0">
                            <option value="" disabled selected hidden>Elige un tipo de vehículo</option>
                            <option value="coche">Coche</option>
                            <option value="moto">Moto</option>
                            <option value="patinete">Patinete eléctrico</option>
                        </select>
                    </div>
                    <div class="d-flex gap-2">
                        <div class="d-flex flex-column w-50">
                            <label for="dateInput">Fecha: </label>
                            <input type="date" id="dateInput" name="dateInput" class="border-dark border-1 rounded-0 p-2" required>
                            <span id="dateInputError" class="error text-danger" aria-live="polite"></span>
                        </div>
                        <div class="d-flex flex-column w-50">
                            <!--
                            <div class="d-flex flex-column w-50">
                                <label for="startTime">Hora de inicio: </label>
                                <input type="time" id="startTime" name="startTime" required>
                            </div>
                            <div class="d-flex flex-column w-50">
                                <label for="endTime">Hora fin: </label>
                                <input type="time" id="endTime" name="endTime" required>
                            </div>
                            -->
                            <label for="durationInput">Duración de reserva (horas): </label>
                            <input type="number" id="durationInput" name="durationInput"
                                title="Solo acepta números positivos" class="form-number border-1 border-dark rounded-0 p-2">
                            <span id="durationInputError" class="error text-danger" aria-live="polite"></span>
                        </div>
                    </div>

                    <div>
                        <input id="checkboxInput" type="checkbox" name="conditions" required>
                        <span>Acepta las condiciones</span>
                    </div>
                    <div>
                        <button id="submitBtn" type="submit" aria-label="Enviar"
                            class="btn btn-dark rounded-0 px-4">Enviar</button>
                        <button id="resetBtn" type="reset" aria-label="Borrar" class="btn btn-danger rounded-0 px-4">
                            Borrar formulario
                        </button>
                    </div>
                </form>
            </fieldset>
        </div>
        <div class="col-6">
            <% if (listareservas.length === 0) { %>
                <div class="w-full border border-dark p-2 bg-zapgrey">
                    <p class="text-center text-muted pt-3">No hay reservas aún.</p>
                </div>
            <% } else { %>
                <table class="table bg-white">
                    <thead>
                        <tr class="bg-zapgrey">
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Vehículo</th>
                            <th>Fecha</th>
                            <th>Duración</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% listareservas.forEach(reserva => { %>
                            <tr>
                                <td><%= reserva.fullName %></td>
                                <td><%= reserva.email %></td>
                                <td><%= reserva.vehicles %></td>
                                <td><%= reserva.dateInput %></td>
                                <td><%= reserva.durationInput %>
                                <% if (reserva.durationInput == 1) { %>
                                    hora
                                <% } else { %>
                                    horas
                                <% } %>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } %>
        </div>
    </div>
</section>

<script src="js/reservationForm.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

<%- include('partials/footer') %>
